# Лабораторная работа №2
В процессе выполнения лабораторной работы требуется реализовать нижеперечисленный функционал с использованием технологии Spring Data JPA.\
Ранее написанный код на основе Spring Data JDBC более не требуется.

---

## **Функциональность для задач**
1. `GET /projects/{projectId}/tasks`  
   - Возвращает **все задачи** указанного проекта.

2. `GET /projects/{projectId}/tasks/{taskId}`  
   - Возвращает **конкретную задачу** по `id` задачи и `id` проекта.  
   - Если задача не найдена, вернуть **404**.

3. `POST /projects/{projectId}/tasks`  
   - **Создаёт** новую задачу в указанном проекте.  
   - **Пример JSON-запроса:**
     ```json
     {
       "name": "task",
       "description": "desc",
       "completed": false,
       "endDate": "2020-02-02"
     }
     ```
   - В ответе вернуть созданную задачу.

4. `PUT /projects/{projectId}/tasks/{taskId}`  
   - **Обновляет** задачу. Новые данные передаются в теле запроса.  
   - Если задача не найдена, вернуть **404**.

5. `DELETE /projects/{projectId}/tasks/{taskId}`  
   - **Удаляет** задачу по `taskId` и `projectId`.

6. **Удаление всех завершённых задач проекта**  
   - Удаляет **все задачи** проекта, у которых `completed = true`.  

---

## **Функциональность для проектов**
1. `GET /projects?search={search}`  
   - Возвращает **все проекты**, если `search` не передан.  
   - Если передан `search`, то ищет проекты, где `search` встречается **в названии или описании (без учёта регистра)**.

2. `GET /projects/{projectId}`  
   - Возвращает **конкретный проект** по `id`.  
   - Если проект не найден, вернуть **404**.

3. `POST /projects`  
   - **Создаёт** новый проект (без задач).  
   - В ответе вернуть созданный проект.

4. `PUT /projects/{projectId}`  
   - **Обновляет** проект.  
   - Если проект не найден, вернуть **404**.

5. `DELETE /projects/{projectId}`  
   - **Удаляет проект**.  
   - При удалении проекта **удаляются все связанные задачи**.

6. **Получение количества незавершённых задач в проектах**  
   - Запрос должен вернуть **ассоциативный массив**, где:
     - **Ключ** — `id` проекта.
     - **Значение** — количество незавершённых задач (`completed = false`).
   - Для проектов без незакрытых задач возвращать `0`.

---

## **Общие требования**
- **Запросы создания и обновления должны возвращать созданную/модифицированную сущность.**
- **Обработать ситуацию, когда сущность не найдена** — вернуть 4xx ошибку.
- **Controller не должен возвращать `Entity` напрямую!** Использовать **DTO/Pojo**.
- **Включить трассировку SQL-запросов** в `application.properties`:
  ```
  logging.level.org.hibernate.SQL=DEBUG
  logging.level.org.hibernate.type=TRACE
  ```
- **Проанализировать SQL-запросы**, генерируемые Hibernate:
  - Оптимальны ли они?
  - Можно ли сократить количество запросов?
  - При необходимости использовать `@Query` для оптимизации.
